#### 函数

形参 形式参数；实参 实际参数；函数调用的时候实参的值回传给形参。

```c
#include <stdio.h>
void swap(int*,int*);
int main()
{
    int x,y;
    scanf("%d%d",&x,&y);
    swap(&x,&y);
    printf("%d%d",x,y);
}
void swap(int *x,int *y)
{
    int z;
    z=*x;
    *x=*y;
    *y=z;//x为存放x的地址，*x为取出x对应地址的内容。
}
```

如若不使用指针只在函数内部调用，函数之间变量值不相互影响，使用指针指向地址来改变内容。

**注释**：函数传递参量包含数组时，传递的是数组的首位地址，所以在函数中改变数组时，主函数的数组值也会发生改变。

**可变参数**：

```c
//#include <stdarg.h>
//-va_list定义参数列表 -va_start -va_arg -va_end
int sum(int n,...)；//n为参数的数量，...表示参数个数不确定。
int sum(int n,...)
{
	int i,sum=0;
	va_list vap;//定义参数列表
	va_start(vap,n);
	for(i=0;i<n;i++)
	{
		sum+=va_arg(vap,int);//获取参数值，类型要声明
	}
	va_end(vap);
	retrun sum;
}
//调用函数sum(3,1,2,3);说白了还是指针的使用
```

**指针函数**

注意一个地方，函数内定义的无论是int还是array，其有效范围都在函数内，没法作用到主函数。

**函数指针，指针函数**：int (*p)( ); int *p( );

```
#include <stdio.h>
int square(int);
int square(int num){
    printf("%d*%d=%d\n",num,num,num*num);
    return num*num;
}
int main(){
    printf("plz intput a num:");
    int num;
    scanf("%d",&num);
    int (*p)(int)=&square;//这里用不用&都可以，因为c语言函数名默认地址；
    printf("%d",(*p)(num));//也可以使用p(num)；
}
```

### **函数指针也可以作为参数**

**用户输入一个表达式，程序根据用户输入的表达式决定调用的是add还是sub函数。**

```c
int add(int,int);
int sub(int,int);
int calc(int (*)(int,int),int,int);//这里也可以写*fp
int calc(int (*fp)(int,int),int num1,int num2)
{
	return (*fp)(num1,num2);
}
calc(add,3,6);//引用，函数指针作为参变量，传递add/sub的地址。
```

**函数指针作为返回值**//用指针来代替函数调用

```c
#include <stdio.h>
int add(int ,int);
int sub(int ,int);
int calc(int(*)(int,int) ,int,int);
int (*select(char))(int,int);//本质是一个返回整型并带有两个参量的函数指针，可用char p。
int add(int num1,int num2){
    return num1+num2;
}
int sub(int num1,int num2){
    return num1-num2;
}
int calc(int(*p)(int,int) ,int num1,int num2){
    return(*p)(num1,num2);
}
int (*select(char p))(int,int){
    switch (p)
    {
    case '+': return add;
    case '-': return sub;
    }
}
int main(){
    int num1,num2;
    char op;
    int (*p)(int,int);
    printf("plz intput(sl:1+2):\n");
    scanf("%d%c%d",&num1,&op,&num2);
    p=select(op);
    printf("%d %c %d =%d",num1,op,num2,calc(p,num1,num2));    
}
```

```c
#include <stdio.h>
int max(int x, int y)
{
    return x > y ? x : y;
}
int main(void)
{
    int (* p)(int, int) = & max; // &可以省略
    int a, b, c, d;
    printf("请输入三个数字:");
    scanf("%d %d %d", & a, & b, & c);/* 与直接调用函数等价，d = max(max(a, b), c) */
    d = p(p(a, b), c); 
    printf("最大的数字是: %d\n", d);
    return 0;
}
```

函数指针主要是能够用一个指针的方式指向一个函数，并且还可以换换指向别的函数，比如有多个函数的申明，它们有不同的具体实现，如果需要调用它们，就可以用一个指针轮流指向它们。

# **指针C语言的精髓**！！